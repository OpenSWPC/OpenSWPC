# チェックポイント・リスタート

大型計算機のバッチシステムでは，一度のジョブで計算できる継続時間に限りがあるため，一定の経過時間（チェックポイント）でメモリの内容をすべて一時ファイルに出力し，別のジョブでそのファイルを読み込んで途中から計算を再開する（リスタート）ことが行われる．

`OpenSWPC`では．動作時間が`ckp_time`（秒）を超えるとチェックポイントを通過したと見なされ，すべての計算途中配列イメージをファイルに吐き出して終了する．

同じ環境下で同じ実行タイトル（`title`）の計算が実行されると，はまずディレクトリcdirを確認し，そこにチェックポイントファイルがあるようであれば途中から計算を再開する．
チェックポイントファイルもしくはディレクトリが存在しなければ，ゼロから計算を開始する．
また，全計算が終了した後には，チェックポイントファイルの中身はほぼすべて削除するが，整数値の認識コードが格納された小ファイルを残す．
これは，リスタート時の時間ステップ調査時に計算が既に終了していることを検知し，同じ計算を繰り返すことを防ぐためのものである．

!!! Info "Parameters"
    **`is_ckp`**
    : チェックポイント・リスタートモードのON/OFF
    
    **`cdir`**
    :チェックポイントファイル出力先．リスタートの場合はこのディレクトリ以下にファイルが存在するか確認する．

    **`ckp_time`**
    : チェックポイント時間．この時間を経過するとチェックポイントファイルを出力して終了する．

    **`ckp_interval`**
    `ckp_interval`時間ステップ毎に経過時間が`ckp_time`を超えたか判定する．
